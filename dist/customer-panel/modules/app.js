angular.module("APP",["ui.router","oc.lazyLoad"]).run(["$rootScope",function(e){e.$on("$stateChangeSuccess",function(){document.body.scrollTop=document.documentElement.scrollTop=0})}]).config(["$stateProvider","$urlRouterProvider","$ocLazyLoadProvider","$locationProvider",function(e,o,t,l){l.html5Mode(!1).hashPrefix(""),t.config({modules:[{name:"headerModule",files:["modules/header/header.controller.js"]},{name:"ui.bootstrap",files:["bower_components/angular-bootstrap/ui-bootstrap.min.js","bower_components/angular-bootstrap/ui-bootstrap-tpls.min.js"]},{name:"satellizer",files:["bower_components/satellizer/dist/satellizer.js"]},{name:"storeServiceModule",files:["modules/store/store.service.js"]},{name:"constantModule",files:["modules/constants.module.js"]},{name:"footerModule",files:["modules/footer/footer.controller.js"]},{name:"Filters",files:["modules/filters/filter.module.js"]}]}),o.otherwise("/"),e.state("main",{url:"",templateUrl:"modules/header/header.template.html",controller:"headerCtrl",resolve:{redirect:["$location",function(e){void 0!=e.path()&&null!=e.path()&&""!=e.path()||e.path("/")}],main:["$ocLazyLoad",function(e){return e.load({name:"headerModule",files:["modules/header/header.controller.js"]})}]}}).state("main.home",{url:"/",templateUrl:"modules/home/home.template.html",controller:"homeCtrl",resolve:{home:["$ocLazyLoad",function(e){return e.load({name:"homeModule",files:["modules/home/home.controller.js"]})}]}}).state("main.login",{url:"/login",templateUrl:"modules/login/login.template.html",controller:"loginCtrl",resolve:{checkLogin:["auth","$location",function(e,o){e.checkLogin()&&o.path("/")}],authentication:["$ocLazyLoad",function(e){return e.load({name:"loginModule",files:["modules/login/login.module.js"]})}]}}).state("main.forgot_password",{url:"/forgot-password",templateUrl:"modules/forgot.password/forgot.password.template.html",controller:"forgotPasswordCtrl",resolve:{forgotPassword:["$ocLazyLoad",function(e){return e.load({name:"forgotPasswordModule",files:["modules/forgot.password/forgot.password.module.js"]})}]}}).state("main.activate",{url:"/email/activate/:user_id/confirm/:token",templateUrl:"modules/activate.email/activate.email.template.html",controller:"activateEmailCtrl",resolve:{activateEmail:["$ocLazyLoad",function(e){return e.load({name:"activateEmailModule",files:["modules/activate.email/activate.email.module.js"]})}]}}).state("main.change_password",{url:"/change-password",templateUrl:"modules/change.password/change.password.template.html",controller:"changePasswordCtrl",resolve:{changePassword:["$ocLazyLoad",function(e){return e.load({name:"changePasswordModule",files:["modules/change.password/change.password.module.js"]})}]}}).state("main.store",{url:"/stores",templateUrl:"modules/store/store.template.html",controller:"storeCtrl",resolve:{home:["$ocLazyLoad",function(e){return e.load({name:"storeModule",files:["modules/store/store.controller.js"]})}]}}).state("main.store-info",{url:"/store/:id",templateUrl:"modules/store.info/store.info.template.html",controller:"storeinfoController",resolve:{home:["$ocLazyLoad",function(e){return e.load({name:"storeinfoModule",files:["modules/store.info/store.info.controller.js"]})}]}}).state("main.category",{url:"/category",templateUrl:"modules/category/category.template.html",controller:"categoryCtrl",resolve:{home:["$ocLazyLoad",function(e){return e.load({name:"categoryModule",files:["modules/category/category.controller.js"]})}]}}).state("main.categoryinfo",{url:"/category/:id",templateUrl:"modules/category.info/category.info.template.html",controller:"categoryinfoCtrl",resolve:{home:["$ocLazyLoad",function(e){return e.load({name:"categoryinfoModule",files:["modules/category.info/category.info.contoller.js"]})}]}}).state("main.dashboard",{url:"/dashboard",templateUrl:"modules/dashboard/dashboard.template.html",controller:"dashboardCtrl",resolve:{checkLogin:["auth","$location",function(e,o){e.checkLogin()||o.path("/login")}],dashboard:["$ocLazyLoad",function(e){return e.load({name:"dashboardModule",files:["modules/dashboard/dashboard.controller.js"]})}]}}).state("404",{url:"/404",templateUrl:"modules/404/404.template.html"}).state("blog_category",{url:"/blog/category",templateUrl:"modules/blog.category/blog.category.template.html"})}]).factory("auth",["$http","$q",function(e,o){return{getToken:function(){return localStorage.getItem("token")},setToken:function(e){return localStorage.setItem("token",e)},logout:function(){localStorage.removeItem("token")},checkLogin:function(){return!!localStorage.getItem("token")},me:function(){var t=o.defer();return e({url:"http://54.213.22.144/api/1.0/auth/me",method:"GET"}).then(function(e){t.resolve(e.data)},function(e){t.reject(e.data)}),t.promise}}}]);